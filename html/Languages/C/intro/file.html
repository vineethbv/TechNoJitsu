<html>
<head><title>Files</title></head>
<body>	
<h1 id="file">File</h1>
<div class="cont"><p>Last session we explained about standard input and output devices handled by C programming language. 
This chapter we will see how C programmers can create, open, close text or binary files for their data storage.file represents a 
sequence of bytes, does not matter if it is a text file or binary file. C programming language provides access on high level functions
as well as low level (OS level) calls to handle file on your storage devices. This chapter will take you through important calls for the 
file management.</p></div>
<h3 class="fiopen">Opening files</h3>
<div class="cont"><p>You can use the fopen( ) function to create a new file or to open an existing file, this call will initialize an object of the type FILE, which contains all the information necessary to control the stream. Following is the prototype of this function call:<br><pre>FILE *fopen( const char * filename, const char * mode );</pre></p></div>
<div class="tbl"><table>
<tr><th>Mode</th> <th>Description</th></tr>
<tr><td>r</td> <td>Opens an existing text file for reading purpose.</td></tr>
<tr><td>w</td> <td>Opens a text file for writing, if it does not exist then a new file is created. Here your program will start writing 
    content from the beginning of the file.</td></tr>
<tr><td>a</td> <td>Opens a text file for writing in appending mode, if it does not exist then a new file is created. Here your program 
    will start appending content in the existing file content.</td></tr>
<tr><td>r+</td> <td>Opens a text file for reading and writing both.</td></tr>	
<tr><td>w+</td> <td>Opens a text file for reading and writing both. It first truncate the file to zero length if it exists
otherwise create the file if it does not exist.</td></tr>
<tr><td>a+</td> <td>Opens a text file for reading and writing both. It creates the file if it does not exist. The reading
will start from the beginning but writing can only be appended.
</td></tr></table></div>
<h3 class="ficlose">Closing a file</h3>
<div class="cont"><p>To close a file, use the fclose( ) function. The prototype of this function is:<br><pre>int fclose( FILE *fp );</pre><br>The fclose( ) function returns zero on success, or EOF if there is an error in closing the file. This function actually, flushes any data still pending in the buffer to the file, closes the file, and releases any memory used for the file. The EOF is a constant defined in the header file stdio.h.</p></div>
<h2 class="fiwrite">Writing a File</h2>
<div class="cont"><p>Following is the simplest function to write individual characters to a stream:<br><pre>int fputc( int c, FILE *fp );</pre><br>The function fputc() writes the character value of the argument c to the output stream referenced by fp. It returns the written character written on success otherwise EOF if there is an error. You can use the following functions to write a null-terminated string to a stream:<br><pre>int fputs( const char *s, FILE *fp ); </pre>The function fputs() writes the string s to the output stream referenced by fp. It returns a non-negative value on success, otherwise EOF is returned in case of any error.</p></div>
<b>Example:</b>
<div class="code"><pre>
#include <stdio.h>
main()
{
    FILE *fp;
    fp = fopen("/tmp/test.txt", "w+");
    fprintf(fp, "This is testing for fprintf...\n");
    fputs("This is testing for fputs...\n", fp);
    fclose(fp);
}	
</pre></div>
<h3 class="firead">Reading a File</h3>
<div class="cont"><p>Following is the simplest function to read a single character from a file:
<br><pre>int fgetc( FILE * fp );</pre><br>The fgetc() function reads a character from the input file referenced by fp. The return value
is the character read, or in case of any error it returns EOF. The following functions allow
you to read a string from a stream:<br><pre>char *fgets( char *buf, int n, FILE *fp );</pre>The functions fgets() reads up to n - 1 characters from the input stream referenced by fp.
It copies the read string into the buffer buf, appending a null character to terminate the
string.</p>
<b>Example:</b></div>

<div class="code"><pre>
#include <stdio.h>
main()
{
    FILE *fp;
    char buff[100];
    fp = fopen("/tmp/test.txt", "r");
    fscanf(fp, "%s", buff);
    printf("1 : %s\n", buff );
    fgets(buff, 255, (FILE*)fp);
    printf("2: %s\n", buff );
    fgets(buff, 255, (FILE*)fp);
    printf("3: %s\n", buff );
    fclose(fp);
}	
</pre></div>
<h3 class="BI/OF">Binary I/O Functions</h3>
<div class="cont"><p>There are following two functions, which can be used for binary input and output:
<br><pre>
size_t fread(void *ptr, size_t size_of_elements, size_t number_of_elements, FILE *a_file);
size_t fwrite(const void *ptr, size_t size_of_elements, size_t number_of_elements, FILE *a_file);</pre><br>Both of these functions should be used to read or write blocks of memories - usually arrays or structures.</p></div>

<h2 id="I&OC">Input & Output</h2>
<div class="cont"><p>When we are saying Input that means to feed some data into program. This can be given in the form of file or from command line. C programming language provides a set of uilt-in functions to read given input and feed it to the program as per requirement.then we are saying Output that means to display some data on screen, printer or in any file. C programming language povides a set of built-in functions to output the data on the computer screen as well as you can save that data in text or binary files.</p></div>
<h3 class="stdf">The Standard Files</h3>
<div class="cont"><p>C programming language treats all the devices as files. So devices such as the display are addressed in the same way as files and following three file are automatically opened when a program executes to provide access to the keyboard and screen.</p>
<table>
<tr><th>Standard File</th> <th>File Pointer</th> <th>Device</th></tr>	
<tr><td>standard input</td> <td>stdin</td> <td>keyboard</td></tr>	
<tr><td>standard output</td> <td>stdout</td> <td>screen</td></tr>	
<tr><td>standard error</td> <td>stderr</td> <td>your screen</td></tr>
</table>
</div>
<h3 class="get&put">The getchar() & putchar() functions</h3>
<div class="cont"><p>The int getchar(void) function reads the next available character from the screen and returns it as an integer. This function reads only single character at a time. You can use
this method in the loop in case you want to read more than one characters from the screen.</p>
<b>Example:</b></div>
<div class="code"><pre>
#include <stdio.h>
int main( )
{
    int c;
    printf( "Enter a value :");
    c = getchar( );
    printf( "\nYou entered: ");
    putchar( c );
    return 0;
}	
</pre></div>
<h3 id="gets&puts">The gets() & puts() functions</h2>
<div class="cont"><p>The char *gets(char *s) function reads a line from stdin into the buffer pointed to by s until either a terminating newline or EOF.
The int puts(const char *s) function writes the string s and a trailing newline to stdout.
</p>
<b>Example:</b></div>

<div class="code"><pre>
#include <stdio.h>
int main( )
{
    char str[100];
    printf( "Enter a value :");
    str = gets( str );
    printf( "\nYou entered: ");
    puts( str );
    return 0;
}	
</pre></div>
<h3 id="scanf&printf">The scanf() and printf() functions</h3>
<div class="cont"><p>The int scanf(const char *format, ...) function reads input from the standard input stream stdin and scans that input according to format provided.
The int printf(const char *format, ...) function writes output to the standard output stream stdout and produces output according to a format provided.
The format can be a simple constant string, but you can specify %s, %d, %c, %f, etc., to print or read strings, integer, character or float respectively. There are many other formatting options available which can be used based on requirements. For a complete detail you can refer to a man page for these function.
</p>
<b>Example:</b></div>

<div class="code"><pre>
#include <stdio.h>
int main( )
{
    char str[100];
    int i;
    printf( "Enter a value :");
    scanf("%s %d", str, &i);
    printf( "\nYou entered: %s, %d ", str, i);
    return 0;
}
	
</pre></div>	
</body>
</html>
